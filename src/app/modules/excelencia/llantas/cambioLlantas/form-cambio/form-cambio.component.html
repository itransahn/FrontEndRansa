<mat-card class="cardPersonalizada" >
    <mat-card-header class="header  mb-4">   Modificación de cambios
        <mat-icon style="float: right !important;" (click)="close()" > close </mat-icon>
        </mat-card-header>

<mat-card-content>
    <form [formGroup]="cambiosForm" #f = "ngForm">
        <div class="row">        
            <div class="col-md-6">
                <mat-form-field appearance="legacy">
                    <mat-label> Tipo de Maquina </mat-label>
                    <mat-select  formControlName="tipoMaquina" (selectionChange)="cargarTipoLlanta()" > 
                        <mat-option> - </mat-option> 
                        <mat-option #tipoId *ngFor="let tipo of catalogo['tipoMaquinas']" [value]="tipo?.id_tipo">
                            {{  tipo?.tipo | uppercase }}
                        </mat-option> 
                      </mat-select> 
                  </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field appearance="legacy">
                    <mat-label> Maquinas </mat-label>
                    <mat-select  formControlName="Maquina" > 
                        <!-- <mat-option> - </mat-option> 
                        <mat-option  *ngFor="let city of catalogo['ciudades']" [value]="city?.id_ciudad">
                            {{  city?.ciudad | uppercase }}
                        </mat-option>  -->
                        <ng-container *ngFor="let item of catalogo['Maquinas']">
                            <div *ngIf="this.data['tipoMaquina'] === item.id_tipoMaquina">
                                <mat-option [value]="item?.id_maquina">
                                    {{  item?.maquina | uppercase }}
                                </mat-option>
                            </div>
                        </ng-container>

                      </mat-select> 
                  </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field appearance="legacy">
                    <mat-label> Tipo de llantas </mat-label>
                    <mat-select  formControlName="tipoLlanta" (selectionChange)="cargarLote()"> 
                        <!-- <mat-option> - </mat-option> 
                        <mat-option  *ngFor="let city of catalogo['ciudades']" [value]="city?.id_ciudad">
                            {{  city?.ciudad | uppercase }}
                        </mat-option>  -->
                        <ng-container *ngFor="let item of tiposLlanta">
                            <div>
                                <mat-option [value]="item?.idLlanta">
                                    {{  item?.Llanta | uppercase }}
                                </mat-option>
                            </div>
                        </ng-container>

                      </mat-select> 
                  </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field appearance="legacy">
                    <mat-label> Lado a cambiar </mat-label>
                    <mat-select  formControlName="ladoCambiar" id="lado"> 
                        <!-- <mat-option> - </mat-option> 
                        <mat-option  *ngFor="let city of catalogo['ciudades']" [value]="city?.id_ciudad">
                            {{  city?.ciudad | uppercase }}
                        </mat-option>  -->
                        <ng-container *ngFor="let item of catalogo['ladoCambiar']">
                            <div >
                                <mat-option [value]="item?.idLado">
                                    {{  item?.lado | uppercase }}
                                </mat-option>
                            </div>
                        </ng-container>

                      </mat-select> 
                  </mat-form-field>
            </div>


            <div class="col-md-6">
                <mat-form-field appearance="legacy">
                    <mat-label> Lote </mat-label>
                    <mat-select  formControlName="Lote"  (selectionChange)="CantidadLote()" id="lote"> 
                        <!-- <mat-option> - </mat-option> 
                        <mat-option  *ngFor="let city of catalogo['ciudades']" [value]="city?.id_ciudad">
                            {{  city?.ciudad | uppercase }}
                        </mat-option>  -->
                        <ng-container *ngFor="let item of lotes">
                            <div >
                                <mat-option [value]="item?.id_stockDetalle" >
                                    {{  item?.lote | uppercase }}
                                </mat-option>
                            </div>
                        </ng-container>

                      </mat-select> 
                  </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field  appearance="legacy">
                    <mat-label> Disponible </mat-label>
                    <input matInput  formControlName ="disponible"  >  
                </mat-form-field>
            </div>

            <div class="col-md-12">
                    <mat-form-field appearance="fill">
                        <mat-label>Fecha de Cambio</mat-label>
                        <input name="date" formControlName = "fecha" matInput [matDatepicker]="pickerN">
                        <mat-datepicker-toggle matSuffix [for]="pickerN"></mat-datepicker-toggle>
                        <mat-datepicker #pickerN></mat-datepicker>
                      </mat-form-field>
             </div>

             <div class="col-md-12">
                <mat-form-field class="example-full-width" appearance="legacy" hintLabel="Max 250 Caracteres">
                    <mat-label>Comentario </mat-label>
                    <textarea matInput #comentario formControlName ="comentario" placeholder="Comentario" ></textarea>
                    <mat-hint align="end">{{comentario.value?.length || 0}}/250</mat-hint>
                  </mat-form-field>
            </div>

            <div class="col-md-12">
                <mat-form-field class="example-full-width" appearance="legacy" hintLabel="Max 250 Caracteres">
                    <mat-label> Motivo de actualización </mat-label>
                    <textarea matInput #comentarioU formControlName ="comentarioU" placeholder="Comentario de actualización" ></textarea>
                    <mat-hint align="end">{{comentarioU.value?.length || 0}}/250</mat-hint>
                  </mat-form-field>
            </div>


            <div class="col-md-12 container">
                <button class="buttonPrincipal" mat-raised-button type="submit" (click)="submit()" [disabled]="f.invalid">Guardar</button>
            </div>

        </div>
    </form>
</mat-card-content>

  </mat-card>